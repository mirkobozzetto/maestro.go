name: real_apis_workflow
version: "1.0"
timeout: 30s

services:
  fastapi:
    type: http
    endpoint: "http://localhost:8000"
    timeout: 5s

  nextjs:
    type: http
    endpoint: "http://localhost:3000"
    timeout: 5s

steps:
  # Remplace ces endpoints par tes vrais endpoints
  
  # Exemple: Créer un utilisateur avec FastAPI
  - id: create_user
    service: fastapi
    method: POST /users  # ou /api/users selon ton API
    input:
      email: "{{ .input.email }}"
      name: "{{ .input.name }}"
    output: user

  # Exemple: Appeler une API route Next.js
  - id: send_notification
    service: nextjs
    method: POST /api/notifications
    input:
      userId: "{{ .user.id }}"
      type: "welcome"
      email: "{{ .input.email }}"
    output: notification

  # Appels parallèles
  - parallel:
      - id: get_user_data
        service: fastapi
        method: GET /users/{{ .user.id }}
        output: user_data
        
      - id: get_settings
        service: nextjs
        method: GET /api/settings
        input:
          userId: "{{ .user.id }}"
        output: settings

output:
  user: "{{ .user }}"
  notification: "{{ .notification }}"
  status: "completed"