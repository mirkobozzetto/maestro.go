name: local_apis_test
version: "1.0"
timeout: 30s

# Configure tes APIs locales ici
services:
  # Ton FastAPI local
  fastapi:
    type: http
    endpoint: "http://localhost:8000"  # Assure-toi que FastAPI tourne sur ce port
    timeout: 5s

  # Ton Next.js local
  nextjs:
    type: http
    endpoint: "http://localhost:3000"  # Assure-toi que Next.js tourne sur ce port
    timeout: 5s

steps:
  # Appel à ton endpoint FastAPI
  - id: call_fastapi
    service: fastapi
    method: POST /api/users  # Remplace par ton vrai endpoint
    input:
      email: "{{ .input.email }}"
      name: "{{ .input.name }}"
    output: fastapi_response

  # Appel à ton API route Next.js
  - id: call_nextjs
    service: nextjs
    method: POST /api/hello  # Remplace par ton vrai endpoint
    input:
      message: "Test from Maestro"
      user: "{{ .fastapi_response }}"
    output: nextjs_response

output:
  fastapi: "{{ .fastapi_response }}"
  nextjs: "{{ .nextjs_response }}"
  status: "success"